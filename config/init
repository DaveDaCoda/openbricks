#!/bin/sh

/bin/busybox test ! -e /proc/cpuinfo && /bin/busybox mount -t proc none /proc
/bin/busybox test ! -e /bin/cp && /bin/busybox --install -s

test -f /proc/progress && PROGRESS=/proc/progress || PROGRESS=/dev/null

/bin/sh /etc/init.d/eject &
/bin/sh /etc/init.d/fonts

echo "87 launching modules" > $PROGRESS
/bin/sh /etc/init.d/modules

echo "93 setting tv-out" > $PROGRESS
/bin/sh /etc/init.d/tvout

echo "94 setting volume" > $PROGRESS
/bin/sh /etc/init.d/alsa

echo "95 setting up tv card" > $PROGRESS
/bin/sh /etc/init.d/tvcard

echo "96 launching lirc daemon" > $PROGRESS
/bin/sh /etc/init.d/lirc

echo "98 setting up networking" > $PROGRESS
/bin/sh /etc/init.d/networking &

echo "99 setting cdrom speed" > $PROGRESS
/bin/sh /etc/init.d/cdspeed

test "$DEBUG" = yes || rm -rf /lib/modules

echo "100 launching mplayer" > $PROGRESS
/bin/sh /etc/init.d/mplayer

/bin/sh /etc/init.d/umount
