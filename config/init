#!/bin/sh

/bin/busybox test ! -e /proc/cpuinfo && /bin/busybox mount -t proc none /proc
/bin/busybox test ! -e /bin/cp && /bin/busybox --install -s

progress() {
  if test -f /proc/splash; then
    echo "show $1" > /proc/splash
  fi
}

/bin/sh /etc/init.d/eject
/bin/sh /etc/init.d/fonts

progress 47000
/bin/sh /etc/init.d/modules

progress 51000
/bin/sh /etc/init.d/tvout

progress 53000
/bin/sh /etc/init.d/alsa

progress 55000
/bin/sh /etc/init.d/tvcard

progress 58000
/bin/sh /etc/init.d/lirc

progress 60000
/bin/sh /etc/init.d/networking

progress 63000
/bin/sh /etc/init.d/cdspeed

if [ "$DEBUG" != yes ]; then
  rm -rf /lib/modules
  echo 0 > /proc/sys/kernel/printk
fi

progress 65535
/bin/sh /etc/init.d/mplayer

/bin/sh /etc/init.d/umount
