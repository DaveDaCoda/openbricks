From dbe2f13037d177f300c583af09fac4326498b0c7 Mon Sep 17 00:00:00 2001
From: Rudi <r.ihle@s-t.de>
Date: Sun, 3 Aug 2014 11:01:27 +0200
Subject: [PATCH 1016/1020] ASoC: imx-hdmi-dma: Remove unnecessary double
 condition check.

Signed-off-by: Rudi <r.ihle@s-t.de>
---
 sound/soc/fsl/imx-hdmi-dma.c |    6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

diff --git a/sound/soc/fsl/imx-hdmi-dma.c b/sound/soc/fsl/imx-hdmi-dma.c
index b78e483..b320691 100644
--- a/sound/soc/fsl/imx-hdmi-dma.c
+++ b/sound/soc/fsl/imx-hdmi-dma.c
@@ -425,19 +425,17 @@ static void hdmi_dma_data_copy(struct snd_pcm_substream *substream,
 		return;
 
 	appl_bytes = frames_to_bytes(runtime, runtime->status->hw_ptr);
-	if (type == 'p')
-		appl_bytes += 2 * priv->period_bytes;
-	offset = appl_bytes % priv->buffer_bytes;
 
 	switch (type) {
 	case 'p':
+		offset = (appl_bytes + 2 * priv->period_bytes) % priv->buffer_bytes;
 		count = priv->period_bytes;
 		space_to_end = priv->period_bytes;
 		break;
 	case 'b':
+		offset = appl_bytes % priv->buffer_bytes;
 		count = priv->buffer_bytes;
 		space_to_end = priv->buffer_bytes - offset;
-
 		break;
 	default:
 		return;
-- 
1.7.9.5

