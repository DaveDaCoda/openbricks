#!/bin/sh

. config/options

mkdir -p $INSTALL/etc
mkdir -p $INSTALL/usr/bin
mkdir -p "`ls -d $INSTALL/lib/modules/*`/misc"

cp $BUILD/$1*/daemons/lircd $INSTALL/usr/bin
cp $BUILD/$1*/tools/irpty $INSTALL/usr/bin
cp $BUILD/$1*/drivers/lirc_dev/lirc_dev.ko \
   $BUILD/$1*/drivers/lirc_i2c/lirc_i2c.ko \
   $BUILD/$1*/drivers/lirc_gpio/lirc_gpio.ko \
   $BUILD/$1*/drivers/lirc_serial/lirc_serial.ko \
   $BUILD/$1*/drivers/lirc_sir/lirc_sir.ko \
   $BUILD/$1*/drivers/lirc_atiusb/lirc_atiusb.ko \
   $BUILD/$1*/drivers/lirc_it87/lirc_it87.ko \
   $BUILD/$1*/drivers/lirc_mceusb/lirc_mceusb.ko \
   $BUILD/$1*/drivers/lirc_mceusb2/lirc_mceusb2.ko \
   $BUILD/$1*/drivers/lirc_streamzap/lirc_streamzap.ko \
   $INSTALL/lib/modules/*/misc

case "$2" in
  generator)
    mkdir -p $GENERATOR_NAME/lirc
    cp $PACKAGES/$1/config/lircrc_* $GENERATOR_NAME/lirc
    cp $PACKAGES/$1/config/lircd_* $GENERATOR_NAME/lirc
    ;;

  installator)
    mkdir -p $INSTALL/etc/lirc
    cp $PACKAGES/$1/config/lircrc_* $INSTALL/etc/lirc
    cp $PACKAGES/$1/config/lircd_* $INSTALL/etc/lirc
    echo "# Remote to use (pctv/logitech/hauppauge/realmagic/creative/leadtek/RM-S6/" > $INSTALL/etc/remote
    echo "# RX-V850/animax/askey/avermedia/packard_bell/atiusb/atiusb2/LG/D-10/digimatrix/" >> $INSTALL/etc/remote
    echo "# mceusb/streamzap/cinergy1400/nova-s-plus/twinhan/tosh-vt76f/flytv-prime)" >> $INSTALL/etc/remote
    echo "REMOTE=$REMOTE" >> $INSTALL/etc/remote
    echo "" >> $INSTALL/etc/remote
    echo "# Remote receiver to use (animax/askey/avermedia/atiusb/atiusb2/creative/hauppauge/" >> $INSTALL/etc/remote
    echo "# homemade/irman/leadtek/logitech/pctv/realmagic/digimatrix/mceusb/mceusb2/" >> $INSTALL/etc/remote
    echo "# streamzap/cx88)" >> $INSTALL/etc/remote
    echo "RECEIVER=$RECEIVER" >> $INSTALL/etc/remote
    ;;

  *)
    mkdir -p $INSTALL/etc/lirc
    cp $PACKAGES/$1/config/lircrc_* $INSTALL/etc/lirc
    cp $PACKAGES/$1/config/lircd_*.conf $INSTALL/etc/lirc
    cp $PACKAGES/$1/config/lircd_* $INSTALL/etc/lirc
    ;;
esac
