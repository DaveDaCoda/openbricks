#!/bin/sh

. config/path

$SCRIPTS/build uClibc || exit 1
$SCRIPTS/build libogg || exit 1

CWD=`pwd`
UCBIN=`ls -d $ROOT/$BUILD/uClibc-*/build/usr/bin`
export UCLIBC_GCC_DLOPT="-Wl,--dynamic-linker,/lib/ld-uClibc.so.0" && \

cd $BUILD/libvorbis-* && \
CC=$UCBIN/gcc ./configure --host=i386-linux-gnu --disable-shared --with-ogg-libraries=`ls -d $ROOT/$BUILD/libogg-*/src` --with-ogg-includes=`ls -d $ROOT/$BUILD/libogg-*/include` --disable-oggtest && \
make CFLAGS="-Os -ffast-math" CC=$UCBIN/gcc && \
cd "$CWD" && \
exit 0

cd "$CWD"
exit 1
