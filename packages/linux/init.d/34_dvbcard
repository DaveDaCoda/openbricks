#!/bin/sh
#
# setup dvb cards
#
# runlevels: geexbox, debug, install

echo "### Setting up DVB card ###"

if test -n "`grep 'Class 0400:.*109e:' /proc/pci`"; then
  # BT8x8 Card
  modprobe dvb-bt8xx >/dev/null 2>&1

  # ensure that DVB card has been discovered
  if test -n "`dmesg | grep 'DVB: registering new adapter'`"; then
    # ensure frontend is present
    if test -n "`dmesg | grep 'DVB: registering frontend'`"; then
      echo -n "" > /var/dvbcard
    fi
  fi
fi

exit 0
