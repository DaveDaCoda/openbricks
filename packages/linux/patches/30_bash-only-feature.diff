diff -Naur linux-2.6.11.orig/scripts/gen_initramfs_list.sh linux-2.6.11/scripts/gen_initramfs_list.sh
--- linux-2.6.11.orig/scripts/gen_initramfs_list.sh	2005-03-02 08:38:38.000000000 +0100
+++ linux-2.6.11/scripts/gen_initramfs_list.sh	2005-03-03 00:59:58.000000000 +0100
@@ -56,9 +56,7 @@
 
 parse() {
 	local location="$1"
-	local name="${location/${srcdir}//}"
-	# change '//' into '/'
-	name="${name//\/\///}"
+	local name="$(echo "$location" | sed -e 's%$srcdir%%' -e 's%//*%/%g')"
 	local mode="$2"
 	local uid="$3"
 	local gid="$4"
