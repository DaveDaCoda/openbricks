#!/bin/sh

. config/path

$SCRIPTS/unpack linux || exit 1

CWD=`pwd`

cd "`ls -d $BUILD/alsa-driver-*`" && \
./configure --with-kernel="`ls -d $ROOT/$BUILD/linux-*`" --with-debug=none --with-isapnp=yes --with-sequencer=no --with-oss=no --disable-verbose-printk --with-cards=als100,azt2320,cmi8330,dt019x,es18xx,opl3sa2,sgalaxy,sscape,ad1816a,ad1848,cs4231,cs4232,cs4236,es1688,interwave,interwave-stb,opti92x-ad1848,opti92x-cs4231,opti93x,sb16,sbawe,es968,wavefront,als4000,azt3328,cmipci,cs4281,ens1370,ens1371,es1938,es1968,fm801,intel8x0,maestro3,sonicvibes,via82xx,ali5451,cs46xx,emu10k1,ice1712,ice1724,nm256,trident,vx222,ymfpci && \
make CFLAGS="-DMODULE=1 -I`ls -d $ROOT/$BUILD/alsa-driver-*/include` -I`ls -d $ROOT/$BUILD/linux-*/include` -Os -mpreferred-stack-boundary=2 -march=i586 -DLINUX -Wall -Wstrict-prototypes -fomit-frame-pointer -Wno-trigraphs -Os -fno-strict-aliasing -fno-common -pipe -DALSA_BUILD" && \
cd "$CWD" && \
exit 0

cd "$CWD"
exit 1

