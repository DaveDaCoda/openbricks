#!/bin/sh

. config/path

$SCRIPTS/build uClibc || exit 1
$SCRIPTS/build linux || exit 1

CWD=`pwd`
UCBIN=`ls -d $ROOT/$BUILD/uClibc-*/build/usr/bin`
export UCLIBC_GCC_DLOPT="-Wl,--dynamic-linker,/lib/ld-uClibc.so.0" && \

cd $BUILD/DirectFB-* && \
CC=$UCBIN/gcc CFLAGS="-Os -isystem=`ls -d $ROOT/$BUILD/linux-*/include`" ./configure --without-static --disable-fbdev --disable-text --disable-sdl --disable-jpeg --disable-png --disable-gif --disable-freetype --disable-libmpeg3 --disable-video4linux --disable-linux-input --disable-mutouch --with-gfxdrivers=cle266,cyber5k,neomagic,tdfx --without-tools && \
make && \
cd "$CWD" && \
exit 0

cd "$CWD"
exit 1
