diff -Naur MPlayer-20050806.orig/libmenu/vf_menu.c MPlayer-20050806/libmenu/vf_menu.c
--- MPlayer-20050806.orig/libmenu/vf_menu.c	2005-09-14 22:58:00.000000000 +0200
+++ MPlayer-20050806/libmenu/vf_menu.c	2005-09-15 23:12:48.000000000 +0200
@@ -35,6 +35,7 @@
 struct vf_priv_s {
   menu_t* root;
   menu_t* current;
+  int passthrough;
 };
 
 static int put_image(struct vf_instance_s* vf, mp_image_t *mpi);
@@ -172,6 +173,13 @@
 static int put_image(struct vf_instance_s* vf, mp_image_t *mpi){
   mp_image_t *dmpi = NULL;
 
+  if (vf->priv->passthrough) {
+    dmpi=vf_get_image(vf->next, IMGFMT_MPEGPES, MP_IMGTYPE_EXPORT,
+                      0, mpi->w, mpi->h);
+    dmpi->planes[0]=mpi->planes[0];
+    return vf_next_put_image(vf,dmpi);
+  }
+
   if(vf->priv->current->show 
   || (vf->priv->current->parent && vf->priv->current->parent->show)) {
   // Close all menu who requested it
@@ -251,8 +259,15 @@
     load_font_ft(width,height);
   }
 #endif
+  if(outfmt == IMGFMT_MPEGPES)
+    vf->priv->passthrough = 1;
   return vf_next_config(vf,width,height,d_width,d_height,flags,outfmt);
 }
+
+static int query_format(struct vf_instance_s* vf, unsigned int fmt){
+  return (vf_next_query_format(vf,fmt));
+}
+
 static int open(vf_instance_t *vf, char* args){
   if(!st_priv) {
     st_priv = calloc(1,sizeof(struct vf_priv_s));
@@ -267,6 +282,7 @@
   }
 
   vf->config = config;
+  vf->query_format=query_format;
   vf->put_image = put_image;
   vf->get_image = get_image;
   vf->uninit=uninit;
diff -Naur MPlayer-20050806.orig/libmpcodecs/vf_expand.c MPlayer-20050806/libmpcodecs/vf_expand.c
--- MPlayer-20050806.orig/libmpcodecs/vf_expand.c	2005-09-14 22:58:01.000000000 +0200
+++ MPlayer-20050806/libmpcodecs/vf_expand.c	2005-09-15 23:14:18.000000000 +0200
@@ -30,6 +30,7 @@
     double aspect;
     int round;
     unsigned char* fb_ptr;
+    int passthrough;
     int first_slice;
 } vf_priv_dflt = {
   -1,-1,
@@ -38,6 +39,7 @@
   0.,
   1,
   NULL,
+  0,
   0
 };
 
@@ -169,6 +171,10 @@
 static int config(struct vf_instance_s* vf,
         int width, int height, int d_width, int d_height,
 	unsigned int flags, unsigned int outfmt){
+    if(outfmt == IMGFMT_MPEGPES) {
+      vf->priv->passthrough = 1;
+      return vf_next_config(vf,width,height,d_width,d_height,flags,outfmt);
+    }
     if (outfmt == IMGFMT_IF09) return 0;
     // calculate the missing parameters:
 #if 0
@@ -329,6 +335,13 @@
 }
 
 static int put_image(struct vf_instance_s* vf, mp_image_t *mpi){
+    if (vf->priv->passthrough) {
+      mp_image_t *dmpi = vf_get_image(vf->next, IMGFMT_MPEGPES,
+                                      MP_IMGTYPE_EXPORT, 0, mpi->w, mpi->h);
+      dmpi->planes[0]=mpi->planes[0];
+      return vf_next_put_image(vf,dmpi);
+    }
+
     if(mpi->flags&MP_IMGFLAG_DIRECT || mpi->flags&MP_IMGFLAG_DRAW_CALLBACK){
 	vf->dmpi=mpi->priv;
 	if(!vf->dmpi) { printf("Why do we get NULL \n"); return 0; }
@@ -386,9 +399,14 @@
     return vf_next_control(vf,request,data);
 }
 
+static int query_format(struct vf_instance_s* vf, unsigned int fmt){
+  return (vf_next_query_format(vf,fmt));
+}
+
 static int open(vf_instance_t *vf, char* args){
     vf->config=config;
     vf->control=control;
+    vf->query_format=query_format;
     vf->start_slice=start_slice;
     vf->draw_slice=draw_slice;
     vf->get_image=get_image;
