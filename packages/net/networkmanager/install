#!/bin/sh

. config/options

get_meta $1
cd $PKG_BUILD_DIR

cp $ROOT/$PACKAGES/$PKG_SECTION/$1/scripts/nm* .install/usr/bin
mkdir -p .install/etc/nm
cp $ROOT/$PACKAGES/$PKG_SECTION/$1/config/* .install/etc/nm

mkdir -p .install/etc/NetworkManager/dispatcher.d
cp $ROOT/$PACKAGES/$PKG_SECTION/$1/scripts/ntpd.sh .install/etc/NetworkManager/dispatcher.d
chmod 755 .install/etc/NetworkManager/dispatcher.d/*

# create empty config to silence error messages
touch .install/etc/NetworkManager/NetworkManager.conf

# enable services in 'etc' path so that the user may disable them
systemctl_enable NetworkManager.service .install etc
systemctl_enable NetworkManager-dispatcher.service .install etc

do_install etc/dbus-1
do_install etc/NetworkManager
do_install etc/nm
do_install etc/systemd
do_install lib
do_install usr/bin
do_install usr/lib/*.so*
do_install usr/libexec
do_install usr/sbin
do_install usr/share

